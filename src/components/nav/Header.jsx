import Link from 'next/link'
import MenuLink from './MenuLink'
import CONSTANTS from '@/assets/constants';
import { cookies } from 'next/headers';
import verifyJWT from '@/utils/verifyJWT';
import LogOutSideNav from './LogOutSideNav';

async function Header() {
    const cookieStore = cookies();
    const token = cookieStore.get(CONSTANTS?.cookieName)?.value;
    const user = await verifyJWT(token, CONSTANTS?.tokenSecret);

    const links = [
        {
            link: '/',
            label: 'Home',
        },
        {
            link: '/cart',
            label: 'Cart'
        },
        {
            link: '/dashboard/home',
            label: 'Dashboard'
        },

    ]
    return (
        <header className="text-gray-600 body-font border-b dark:border-b-gray-500">
            <div className="container mx-auto flex flex-wrap p-2 flex-col md:flex-row items-center">
                <Link href="/" className="flex title-font font-medium items-center text-gray-900 mb-4 md:mb-0">

                    <svg width="300" height="50" viewBox="0 0 300 114" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <rect width="300" height="114" rx="5" fill="#56D364" />
                        <path d="M18.56 67L19.28 62.83H29.66L28.94 67H18.56ZM21.44 50.17L22.19 46H32.54L31.79 50.17H21.44ZM20.09 58L20.81 53.92H30.59L29.87 58H20.09ZM18.89 46H23.72L20.09 67H15.32L18.89 46ZM44.9588 53.2H49.4288L47.0588 67H42.6188L44.9588 53.2ZM32.8088 60.07C32.9888 58.71 33.4388 57.49 34.1588 56.41C34.8788 55.31 35.7688 54.45 36.8288 53.83C37.9088 53.21 39.0688 52.9 40.3088 52.9C41.2288 52.9 42.0088 53.1 42.6488 53.5C43.3088 53.88 43.8288 54.41 44.2088 55.09C44.6088 55.77 44.8688 56.54 44.9888 57.4C45.1288 58.26 45.1388 59.16 45.0188 60.1C44.8988 61.08 44.6388 62.01 44.2388 62.89C43.8588 63.75 43.3688 64.51 42.7688 65.17C42.1688 65.83 41.4688 66.35 40.6688 66.73C39.8888 67.09 39.0388 67.27 38.1188 67.27C36.8988 67.27 35.8588 66.95 34.9988 66.31C34.1588 65.65 33.5388 64.78 33.1388 63.7C32.7588 62.6 32.6488 61.39 32.8088 60.07ZM37.4888 60.1C37.4088 60.7 37.4388 61.27 37.5788 61.81C37.7388 62.35 38.0188 62.79 38.4188 63.13C38.8388 63.45 39.3488 63.61 39.9488 63.61C40.3888 63.63 40.8188 63.55 41.2388 63.37C41.6588 63.19 42.0388 62.94 42.3788 62.62C42.7388 62.28 43.0388 61.89 43.2788 61.45C43.5188 61.01 43.6788 60.55 43.7588 60.07C43.8188 59.61 43.8088 59.18 43.7288 58.78C43.6488 58.36 43.4988 57.99 43.2788 57.67C43.0788 57.33 42.8188 57.07 42.4988 56.89C42.1988 56.69 41.8388 56.58 41.4188 56.56C40.7988 56.54 40.1988 56.69 39.6188 57.01C39.0588 57.33 38.5888 57.77 38.2088 58.33C37.8288 58.87 37.5888 59.46 37.4888 60.1ZM52.1185 62.02C52.6385 62.48 53.1385 62.89 53.6185 63.25C54.0985 63.59 54.5685 63.85 55.0285 64.03C55.4885 64.19 55.9385 64.26 56.3785 64.24C56.7985 64.24 57.1485 64.13 57.4285 63.91C57.7085 63.67 57.8485 63.38 57.8485 63.04C57.8885 62.72 57.7985 62.45 57.5785 62.23C57.3585 62.01 57.0585 61.82 56.6785 61.66C56.2985 61.48 55.8585 61.3 55.3585 61.12C54.7585 60.9 54.1885 60.61 53.6485 60.25C53.1285 59.89 52.7085 59.44 52.3885 58.9C52.0885 58.34 51.9785 57.67 52.0585 56.89C52.1185 55.99 52.3985 55.25 52.8985 54.67C53.4185 54.09 54.0785 53.65 54.8785 53.35C55.6785 53.05 56.5285 52.9 57.4285 52.9C58.5685 52.9 59.5985 53.1 60.5185 53.5C61.4585 53.9 62.3085 54.38 63.0685 54.94L61.2085 57.85C60.7085 57.33 60.1385 56.89 59.4985 56.53C58.8785 56.17 58.2485 55.99 57.6085 55.99C57.1885 55.99 56.8385 56.08 56.5585 56.26C56.2985 56.42 56.1585 56.65 56.1385 56.95C56.0985 57.27 56.1985 57.53 56.4385 57.73C56.6985 57.93 57.0485 58.12 57.4885 58.3C57.9285 58.46 58.3785 58.63 58.8385 58.81C59.4985 59.07 60.0885 59.38 60.6085 59.74C61.1485 60.1 61.5685 60.54 61.8685 61.06C62.1885 61.58 62.3185 62.24 62.2585 63.04C62.1985 64 61.9185 64.82 61.4185 65.5C60.9385 66.16 60.2985 66.66 59.4985 67C58.6985 67.36 57.7885 67.55 56.7685 67.57C55.8285 67.57 54.9485 67.45 54.1285 67.21C53.3085 66.99 52.5485 66.68 51.8485 66.28C51.1485 65.86 50.4985 65.42 49.8985 64.96L52.1185 62.02ZM79.7328 53.2L67.4928 73.57H62.8728L67.5828 65.74L63.9228 53.2H68.6928L71.1528 64.27L68.8428 64.21L75.0228 53.2H79.7328ZM88.8427 50.53L89.6527 46H105.853L105.073 50.53H99.4927L96.6427 67H91.6627L94.4827 50.53H88.8427ZM113.572 53.2H118.042L115.672 67H111.232L113.572 53.2ZM101.422 60.07C101.602 58.71 102.052 57.49 102.772 56.41C103.492 55.31 104.382 54.45 105.442 53.83C106.522 53.21 107.682 52.9 108.922 52.9C109.842 52.9 110.622 53.1 111.262 53.5C111.922 53.88 112.442 54.41 112.822 55.09C113.222 55.77 113.482 56.54 113.602 57.4C113.742 58.26 113.752 59.16 113.632 60.1C113.512 61.08 113.252 62.01 112.852 62.89C112.472 63.75 111.982 64.51 111.382 65.17C110.782 65.83 110.082 66.35 109.282 66.73C108.502 67.09 107.652 67.27 106.732 67.27C105.512 67.27 104.472 66.95 103.612 66.31C102.772 65.65 102.152 64.78 101.752 63.7C101.372 62.6 101.262 61.39 101.422 60.07ZM106.102 60.1C106.022 60.7 106.052 61.27 106.192 61.81C106.352 62.35 106.632 62.79 107.032 63.13C107.452 63.45 107.962 63.61 108.562 63.61C109.002 63.63 109.432 63.55 109.852 63.37C110.272 63.19 110.652 62.94 110.992 62.62C111.352 62.28 111.652 61.89 111.892 61.45C112.132 61.01 112.292 60.55 112.372 60.07C112.432 59.61 112.422 59.18 112.342 58.78C112.262 58.36 112.112 57.99 111.892 57.67C111.692 57.33 111.432 57.07 111.112 56.89C110.812 56.69 110.452 56.58 110.032 56.56C109.412 56.54 108.812 56.69 108.232 57.01C107.672 57.33 107.202 57.77 106.822 58.33C106.442 58.87 106.202 59.46 106.102 60.1ZM127.422 43.6L123.402 67H118.932L122.922 43.6H127.422ZM135.522 60.1C135.342 61.46 134.892 62.69 134.172 63.79C133.452 64.87 132.552 65.73 131.472 66.37C130.412 66.99 129.272 67.3 128.052 67.3C127.132 67.3 126.342 67.11 125.682 66.73C125.022 66.33 124.492 65.79 124.092 65.11C123.712 64.43 123.452 63.66 123.312 62.8C123.192 61.92 123.192 61.01 123.312 60.07C123.452 59.09 123.712 58.17 124.092 57.31C124.472 56.43 124.962 55.66 125.562 55C126.182 54.34 126.882 53.83 127.662 53.47C128.442 53.09 129.292 52.9 130.212 52.9C131.432 52.9 132.462 53.23 133.302 53.89C134.162 54.53 134.782 55.4 135.162 56.5C135.562 57.58 135.682 58.78 135.522 60.1ZM130.872 60.07C130.972 59.47 130.932 58.91 130.752 58.39C130.592 57.85 130.312 57.41 129.912 57.07C129.512 56.73 129.002 56.56 128.382 56.56C127.942 56.56 127.512 56.65 127.092 56.83C126.692 57.01 126.312 57.26 125.952 57.58C125.592 57.9 125.292 58.28 125.052 58.72C124.832 59.16 124.672 59.62 124.572 60.1C124.512 60.56 124.522 61 124.602 61.42C124.682 61.82 124.822 62.19 125.022 62.53C125.242 62.87 125.512 63.14 125.832 63.34C126.152 63.52 126.522 63.61 126.942 63.61C127.582 63.63 128.172 63.48 128.712 63.16C129.272 62.84 129.742 62.41 130.122 61.87C130.522 61.31 130.772 60.71 130.872 60.07ZM140.881 43.6H145.411L141.361 67H136.921L140.881 43.6ZM152.123 67.3C150.723 67.3 149.503 67.05 148.463 66.55C147.443 66.03 146.643 65.3 146.063 64.36C145.503 63.42 145.223 62.3 145.223 61C145.223 59.86 145.433 58.8 145.853 57.82C146.273 56.84 146.863 55.99 147.623 55.27C148.403 54.53 149.323 53.95 150.383 53.53C151.443 53.11 152.613 52.9 153.893 52.9C155.293 52.9 156.463 53.15 157.403 53.65C158.363 54.13 159.083 54.83 159.563 55.75C160.063 56.65 160.313 57.74 160.313 59.02C160.313 59.34 160.283 59.69 160.223 60.07C160.163 60.45 160.083 60.78 159.983 61.06H147.503V58.54H156.383L155.333 59.92C155.453 59.72 155.553 59.51 155.633 59.29C155.713 59.05 155.753 58.84 155.753 58.66C155.753 58.08 155.663 57.59 155.483 57.19C155.323 56.79 155.073 56.48 154.733 56.26C154.413 56.04 153.993 55.93 153.473 55.93C152.933 55.93 152.443 56.04 152.003 56.26C151.583 56.46 151.213 56.75 150.893 57.13C150.593 57.51 150.343 57.98 150.143 58.54C149.963 59.08 149.823 59.69 149.723 60.37C149.623 61.09 149.653 61.73 149.813 62.29C149.993 62.85 150.293 63.28 150.713 63.58C151.153 63.88 151.693 64.03 152.333 64.03C153.093 64.03 153.753 63.87 154.313 63.55C154.873 63.23 155.353 62.79 155.753 62.23L159.653 63.22C158.933 64.54 157.933 65.55 156.653 66.25C155.393 66.95 153.883 67.3 152.123 67.3ZM174.276 59.62C174.616 60.34 174.986 60.98 175.386 61.54C175.806 62.08 176.286 62.51 176.826 62.83C177.386 63.13 178.026 63.28 178.746 63.28C179.286 63.28 179.776 63.18 180.216 62.98C180.656 62.78 181.016 62.51 181.296 62.17C181.576 61.81 181.726 61.42 181.746 61C181.826 60.46 181.716 60.03 181.416 59.71C181.116 59.37 180.686 59.07 180.126 58.81C179.566 58.53 178.926 58.24 178.206 57.94C177.666 57.72 177.106 57.43 176.526 57.07C175.966 56.69 175.446 56.24 174.966 55.72C174.506 55.2 174.136 54.6 173.856 53.92C173.596 53.24 173.506 52.47 173.586 51.61C173.706 50.35 174.146 49.27 174.906 48.37C175.666 47.45 176.626 46.74 177.786 46.24C178.966 45.74 180.236 45.5 181.596 45.52C182.856 45.52 183.946 45.73 184.866 46.15C185.786 46.57 186.556 47.13 187.176 47.83C187.796 48.53 188.276 49.3 188.616 50.14L184.626 52.21C184.386 51.75 184.106 51.34 183.786 50.98C183.486 50.6 183.126 50.31 182.706 50.11C182.286 49.89 181.776 49.78 181.176 49.78C180.716 49.78 180.306 49.86 179.946 50.02C179.586 50.16 179.286 50.36 179.046 50.62C178.826 50.88 178.706 51.19 178.686 51.55C178.626 51.91 178.696 52.24 178.896 52.54C179.116 52.84 179.416 53.11 179.796 53.35C180.196 53.59 180.636 53.81 181.116 54.01C181.616 54.21 182.116 54.41 182.616 54.61C183.536 54.95 184.336 55.41 185.016 55.99C185.716 56.55 186.236 57.23 186.576 58.03C186.936 58.83 187.076 59.77 186.996 60.85C186.856 62.25 186.366 63.46 185.526 64.48C184.706 65.5 183.666 66.29 182.406 66.85C181.166 67.39 179.856 67.66 178.476 67.66C177.196 67.66 176.026 67.42 174.966 66.94C173.906 66.46 172.996 65.8 172.236 64.96C171.476 64.12 170.916 63.18 170.556 62.14L174.276 59.62ZM196.068 67.3C194.668 67.3 193.448 67.05 192.408 66.55C191.388 66.03 190.588 65.3 190.008 64.36C189.448 63.42 189.168 62.3 189.168 61C189.168 59.86 189.378 58.8 189.798 57.82C190.218 56.84 190.808 55.99 191.568 55.27C192.348 54.53 193.268 53.95 194.328 53.53C195.388 53.11 196.558 52.9 197.838 52.9C199.238 52.9 200.408 53.15 201.348 53.65C202.308 54.13 203.028 54.83 203.508 55.75C204.008 56.65 204.258 57.74 204.258 59.02C204.258 59.34 204.228 59.69 204.168 60.07C204.108 60.45 204.028 60.78 203.928 61.06H191.448V58.54H200.328L199.278 59.92C199.398 59.72 199.498 59.51 199.578 59.29C199.658 59.05 199.698 58.84 199.698 58.66C199.698 58.08 199.608 57.59 199.428 57.19C199.268 56.79 199.018 56.48 198.678 56.26C198.358 56.04 197.938 55.93 197.418 55.93C196.878 55.93 196.388 56.04 195.948 56.26C195.528 56.46 195.158 56.75 194.838 57.13C194.538 57.51 194.288 57.98 194.088 58.54C193.908 59.08 193.768 59.69 193.668 60.37C193.568 61.09 193.598 61.73 193.758 62.29C193.938 62.85 194.238 63.28 194.658 63.58C195.098 63.88 195.638 64.03 196.278 64.03C197.038 64.03 197.698 63.87 198.258 63.55C198.818 63.23 199.298 62.79 199.698 62.23L203.598 63.22C202.878 64.54 201.878 65.55 200.598 66.25C199.338 66.95 197.828 67.3 196.068 67.3ZM212.168 53.2L209.798 67H205.388L207.758 53.2H212.168ZM215.408 57.85C215.188 57.65 214.948 57.48 214.688 57.34C214.448 57.18 214.158 57.1 213.818 57.1C213.318 57.08 212.868 57.22 212.468 57.52C212.068 57.8 211.738 58.18 211.478 58.66C211.218 59.12 211.048 59.62 210.968 60.16L210.278 58.57C210.458 57.61 210.808 56.7 211.328 55.84C211.868 54.96 212.498 54.25 213.218 53.71C213.958 53.15 214.728 52.87 215.528 52.87C216.028 52.87 216.468 52.98 216.848 53.2C217.248 53.42 217.588 53.71 217.868 54.07L215.408 57.85ZM219.085 53.2H223.795L225.625 60.76L229.855 53.2H234.685L224.455 68.65L219.085 53.2ZM236.687 48.01C236.687 47.29 236.947 46.71 237.467 46.27C237.987 45.81 238.607 45.58 239.327 45.58C240.067 45.58 240.687 45.81 241.187 46.27C241.707 46.71 241.967 47.29 241.967 48.01C241.967 48.73 241.707 49.32 241.187 49.78C240.687 50.24 240.067 50.47 239.327 50.47C238.607 50.47 237.987 50.24 237.467 49.78C236.947 49.32 236.687 48.73 236.687 48.01ZM236.267 53.2H240.617L238.277 67H233.927L236.267 53.2ZM246.754 60.1C246.654 60.76 246.704 61.36 246.904 61.9C247.124 62.44 247.464 62.87 247.924 63.19C248.404 63.49 248.974 63.65 249.634 63.67C250.474 63.69 251.274 63.5 252.034 63.1C252.794 62.7 253.434 62.22 253.954 61.66L253.384 66.04C252.804 66.42 252.154 66.73 251.434 66.97C250.714 67.19 249.884 67.3 248.944 67.3C247.524 67.3 246.264 66.99 245.164 66.37C244.064 65.73 243.244 64.87 242.704 63.79C242.164 62.71 241.984 61.47 242.164 60.07C242.364 58.65 242.874 57.41 243.694 56.35C244.514 55.27 245.554 54.43 246.814 53.83C248.074 53.21 249.444 52.9 250.924 52.9C251.824 52.9 252.614 53.01 253.294 53.23C253.994 53.45 254.614 53.74 255.154 54.1L254.554 58.54C254.174 57.9 253.664 57.4 253.024 57.04C252.404 56.68 251.724 56.5 250.984 56.5C250.264 56.5 249.604 56.67 249.004 57.01C248.404 57.33 247.904 57.76 247.504 58.3C247.104 58.82 246.854 59.42 246.754 60.1ZM263.393 67.3C261.993 67.3 260.773 67.05 259.733 66.55C258.713 66.03 257.913 65.3 257.333 64.36C256.773 63.42 256.493 62.3 256.493 61C256.493 59.86 256.703 58.8 257.123 57.82C257.543 56.84 258.133 55.99 258.893 55.27C259.673 54.53 260.593 53.95 261.653 53.53C262.713 53.11 263.883 52.9 265.163 52.9C266.563 52.9 267.733 53.15 268.673 53.65C269.633 54.13 270.353 54.83 270.833 55.75C271.333 56.65 271.583 57.74 271.583 59.02C271.583 59.34 271.553 59.69 271.493 60.07C271.433 60.45 271.353 60.78 271.253 61.06H258.773V58.54H267.653L266.603 59.92C266.723 59.72 266.823 59.51 266.903 59.29C266.983 59.05 267.023 58.84 267.023 58.66C267.023 58.08 266.933 57.59 266.753 57.19C266.593 56.79 266.343 56.48 266.003 56.26C265.683 56.04 265.263 55.93 264.743 55.93C264.203 55.93 263.713 56.04 263.273 56.26C262.853 56.46 262.483 56.75 262.163 57.13C261.863 57.51 261.613 57.98 261.413 58.54C261.233 59.08 261.093 59.69 260.993 60.37C260.893 61.09 260.923 61.73 261.083 62.29C261.263 62.85 261.563 63.28 261.983 63.58C262.423 63.88 262.963 64.03 263.603 64.03C264.363 64.03 265.023 63.87 265.583 63.55C266.143 63.23 266.623 62.79 267.023 62.23L270.923 63.22C270.203 64.54 269.203 65.55 267.923 66.25C266.663 66.95 265.153 67.3 263.393 67.3ZM274.482 62.02C275.002 62.48 275.502 62.89 275.982 63.25C276.462 63.59 276.932 63.85 277.392 64.03C277.852 64.19 278.302 64.26 278.742 64.24C279.162 64.24 279.512 64.13 279.792 63.91C280.072 63.67 280.212 63.38 280.212 63.04C280.252 62.72 280.162 62.45 279.942 62.23C279.722 62.01 279.422 61.82 279.042 61.66C278.662 61.48 278.222 61.3 277.722 61.12C277.122 60.9 276.552 60.61 276.012 60.25C275.492 59.89 275.072 59.44 274.752 58.9C274.452 58.34 274.342 57.67 274.422 56.89C274.482 55.99 274.762 55.25 275.262 54.67C275.782 54.09 276.442 53.65 277.242 53.35C278.042 53.05 278.892 52.9 279.792 52.9C280.932 52.9 281.962 53.1 282.882 53.5C283.822 53.9 284.672 54.38 285.432 54.94L283.572 57.85C283.072 57.33 282.502 56.89 281.862 56.53C281.242 56.17 280.612 55.99 279.972 55.99C279.552 55.99 279.202 56.08 278.922 56.26C278.662 56.42 278.522 56.65 278.502 56.95C278.462 57.27 278.562 57.53 278.802 57.73C279.062 57.93 279.412 58.12 279.852 58.3C280.292 58.46 280.742 58.63 281.202 58.81C281.862 59.07 282.452 59.38 282.972 59.74C283.512 60.1 283.932 60.54 284.232 61.06C284.552 61.58 284.682 62.24 284.622 63.04C284.562 64 284.282 64.82 283.782 65.5C283.302 66.16 282.662 66.66 281.862 67C281.062 67.36 280.152 67.55 279.132 67.57C278.192 67.57 277.312 67.45 276.492 67.21C275.672 66.99 274.912 66.68 274.212 66.28C273.512 65.86 272.862 65.42 272.262 64.96L274.482 62.02Z" fill="black" />
                    </svg>
                    Easy Table Services

                    <span className="ml-3 text-xl">Easy Table services</span>
                </Link>
                <nav className="md:ml-auto md:mr-auto flex flex-wrap items-center text-base justify-center">
                    {
                        links.map((link) => <MenuLink key={link?.link} {...link} />)
                    }
                </nav>
                {
                    !user?.id && !user?.role ?

                        <Link href={'/login'} className="inline-flex items-center bg-violet-600 text-white border-0 py-1 px-3 focus:outline-none hover:bg-violet-800 rounded text-base mt-4 md:mt-0">Login
                            <svg fill="none" stroke="currentColor" strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" className="w-4 h-4 ml-1" viewBox="0 0 24 24">
                                <path d="M5 12h14M12 5l7 7-7 7"></path>
                            </svg>
                        </Link>
                        :
                        <LogOutSideNav />
                }
            </div>
        </header>
    )
}

export default Header